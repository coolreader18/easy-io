!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.stdio=t()}(this,function(){"use strict";
/* @legume @preserve
   * @name stdio
   * @author coolreader18
   */const e=e=>e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`);function t(t,n,...o){const a=document.createElement(t);if("style"===t&&"object"==typeof o[0]){const t=Object.entries(o[0]);let n="";for(let o=0;o<t.length;o++){let[a,l]=t[o];Array.isArray(l)||(l=[l]),n+=(l=l.map(e=>Object.entries(e))).reduce((n,o)=>`${n}${a} {\n${o.reduce((n,[o,l])=>{if("object"==typeof l){let e=a+(o.startsWith("&")?o:" "+o);return t.push([e,l]),n}return`${n}  ${e(o)}: ${l};\n`},"")}}\n`,"")}a.textContent=n}for(let[t,o]of Object.entries(n||{})){let n=!0;"style"===t&&"object"==typeof o&&(n=!1,Object.assign(a.style,Object.entries(o).map(t=>(t[0]=e(t[0]),t)).reduce((e,[t,n])=>({...e,[t]:n}),{}))),t.match("data-.+")&&"object"==typeof o&&(o=JSON.stringify(object)),n&&a.setAttribute(t,o)}return o.forEach(e=>a.append(...[].concat(e))),a}var n=e=>({title:()=>t("div",{class:"Subhead"},t("div",{class:"Subhead-heading"},e.text)),textInput:()=>t("dl",{class:"form-group"},t("dt",null,t("label",null,e.label||e.name)),t("dd",null,t("input",{type:"text",class:"form-control",placeholder:e.placeholder||""}))),checkbox:n=>({elem:t("dl",null,t("dt",null,t("label",null,e.label||e.name)),t("dd",null,e.options.map(e=>("string"==typeof e&&(e={val:e}),t("div",{class:"form-checkbox"},t("label",null,t("input",{type:"checkbox","data-value":e.val}),e.label||e.val)))))),evt:"input"}),radio:()=>({elem:t("dl",null,t("dt",null,t("label",null,e.label||e.name)),t("dd",null,e.options.map(n=>("string"==typeof n&&(n={val:n}),t("div",{class:"form-checkbox"},t("label",{class:""},t("input",{type:"radio",name:e.name,"data-value":n.val}),n.label||n.val)))))),evt:"input"}),output:()=>({elem:t("div",{style:{display:"block",height:"fit-content",width:"fit-content",marginTop:"25px",marginBottom:"20px"}},t("output",{class:"Box p-2 hover-grow"})),evt:"output"}),heading:()=>t("h1",{class:"h"+e.size},e.text),text:()=>t("p",{class:"io-text"},e.text),canvas:()=>({elem:t("div",{class:"Box p-2",style:{width:"fit-content",height:"fit-content"}},t("canvas",{width:e.width||"",height:e.height||""})),evt:"canvas"}),file:()=>({elem:t("dl",{class:"form-group"},t("dt",null,t("label",null,e.label||e.name)),t("dd",null,t("div",{class:"form-control"},t("button",{class:"btn"},"Choose file"),t("span",{class:"m-2"})))),fileDragTo:".form-control",fileDisplay:"span",fileButton:"button"}),button:()=>({elem:t("div",{style:{padding:"10px 0"}},t("button",{class:"btn"},e.label||e.name)),evt:"button"})})[e.type]();const o=t("div",{class:"Box p-5 m-4"});var a=Object.freeze({default:n,root:o,styleUrl:"https://cdn.jsdelivr.net/npm/primer@10.4.0/build/build.css"}),l=["interactive","complete"],r=function(e,t){return new Promise(function(n){e&&"function"!=typeof e&&(t=e,e=null),t=t||window.document;var o=function(){return n(void(e&&setTimeout(e)))};-1!==l.indexOf(t.readyState)?o():t.addEventListener("DOMContentLoaded",o)})};r.resume=function(e){return function(t){return r(e).then(function(){return t})}};let i=a,s=n,c=!1;const d=e=>e?Array.isArray(e)?e:[e]:[],u=(e,t)=>e.reduce((e,t)=>t(e),t);let p=!1;const f=Object.assign([],{refresh(){if(!p)return;const{root:e,scope:t,outputs:n,title:o}=this,a=document.createDocumentFragment();var l,r,i;for(o&&a.appendChild(s({type:"title",text:o},f)),this.forEach(e=>{let o=s(e,f);const c=d(e.transform);(o instanceof HTMLElement||Array.isArray(o))&&(o={elem:o}),o.elem=[].concat(o.elem);const p=o.elem[o.main||0],m=o.evt?p.querySelectorAll(o.evt):[p],h={textInput:()=>{let n=m[0];t[e.name]="",n.addEventListener("input",({target:{value:n}})=>{t[e.name]=u(c,n)})},checkbox:()=>{m.forEach(n=>n.addEventListener("change",()=>t[e.name]=Array.from(m).reduce((e,t)=>e.concat(t.checked?t.dataset.value:[]),[])))},radio:()=>{m.forEach(n=>n.addEventListener("change",()=>t[e.name]=n.dataset.value))},output:()=>{l=n.output,r=e.link,i={elem:m[0],tranform:e.transform},l[r]?l[r].push(i):l[r]=[i]},canvas:()=>{let{interval:t}=e;const o=()=>e.draw(m[0].getContext("2d"),this.scope,m[0]),a={updateCanvas:o,onUpdate:!0};void 0===t&&(t="update"),"number"==typeof t&&(a.onUpdate=!1,a.interval=setInterval(o,t)),n.canvas.push(a)},file:()=>{let{fileDisplay:n,fileButton:a,fileDragTo:l}=o;const r=document.createElement("input");function i(o){o&&(n.innerText=o.name,t[e.name]=u(c,o.slice()))}r.type="file",n=n?p.querySelector(n):p,a=a?p.querySelector(a):p,l=l?p.querySelector(l):p,a.addEventListener("click",r.click.bind(r)),Object.entries({drop:e=>{e.preventDefault();var t=e.dataTransfer;if(t.items){const e=t.items[0];"file"==e.kind&&i(e.getAsFile())}else i(t.files[0])},dragover:e=>e.preventDefault(),dragend:e=>{var t=e.dataTransfer;if(t.items)for(var n=0;n<t.items.length;n++)t.items.remove(n);else e.dataTransfer.clearData()}}).forEach(([e,t])=>l.addEventListener(e,t)),r.addEventListener("input",e=>i(e.currentTarget.files[0]))},button:()=>{m[0].addEventListener("click",()=>e.handler(f.scope))}};e.type in h&&h[e.type](),o.elem.forEach(a.appendChild.bind(a))});e.firstChild;)e.removeChild(e.firstChild);this.root.appendChild(a)},update(e){const{output:t,canvas:n}=this.outputs;(t[e]||[]).forEach(({elem:t,transform:n})=>t.innerHTML=u(d(n),this.scope[e])),n.forEach(e=>{e.onUpdate&&e.updateCanvas()})},outputs:{output:{},canvas:[]},scope:new Proxy({},{set:(e,t,n)=>(e[t]=n,f.update(t),!0)}),root:document.body});r().then(()=>{p=!0,f.root=document.body;const e="root";e in i&&(f.root=f.root.appendChild(i[e]),f.refresh());const t="init";t in i&&i[t](root)});const m={add(...e){e.forEach(e=>f.push(e)),f.refresh()},title(e){return this.dom.title=e,this},dom:new Proxy(f,{set:(e,t,n)=>(e[t]=n,f.refresh(),!0)}),style(e){if("function"==typeof e)s=e;else{if("object"!=typeof e)throw new Error;i=e,s=e.transformElem}},loadStyleSheet(){const{styleUrl:e}=i;let n;if(e)return"function"==typeof e&&(n=e(c)),(n=[].concat(n)).forEach(e=>document.head.appendChild(t("link",{rel:"stylesheet",href:e}))),this}};return Object.defineProperty(m,"testing",{value:()=>(c=!0,m),enumerable:!1}),m});
